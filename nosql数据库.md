[TOC]

# 缓存

`https://blog.csdn.net/kongtiao5/article/details/82771694`

## 缓存穿透

缓存当中和数据库当中都没有数据，导致的数据库压力过大，如某id为-1或者是不存在的较大数，被攻击者大量请求，

处理：

1. 增加数据校验，拦截不合理请求
2. 缓存设置过期时间，如果该一段时间内都为空，不请求数据库

## 缓存击穿

缓存当中不存在，但是数据库当中存在数据时，如果用户同时没有读到数据，则会大量请求数据库，造成压力过大，

解决：

1. 热数据过期时间设置应长，甚至永不过期
2. 互斥锁，当第一个发现为空的线程时，拿到锁，去数据库读取数据并更新缓存，其他线程等待，等锁解除使可以拿到数据。

## 缓存雪崩

缓存中大量数据过期，数据库压力剧增，不同的是，雪崩可能是多种不同的数据过期，穿透或者击穿往往是一种数据

解决：

 	1. 过期时间随机，避免同一时间过期
 	2. 如果缓存数据库是分布式的，考虑将数据均匀分布在不同数据库，
 	3. 设置热点数据永不过期