[TOC]

# 常见协议

## TCP/IP

`自己的csdn博客有`

`https://blog.csdn.net/weixin_40389301/article/details/80310483`

## TCP

全双工通信：允许通信双方的应用进程在任何时候都能发送数据，连接的两端设有发送缓存和接收缓存，用来临时存放双向通信的数据

面向字节流：指流入到进程或从进程流出的字节序列；虽然应用程序和TCP的交互是一次一个数据块，但是TCP把应用程序交付下来的数据看成是一连串的无结构字节流

## UDP



## 对比

| 协议   | TCP          | UDP                 |
| ------ | ------------ | ------------------- |
| 名称   | 传输控制协议 | 用户数据报协议      |
| 连接   | 面向连接     | 无连接              |
| 可靠性 | 可靠         | 不可靠传送服务      |
| 通信   | 全双工通信   |                     |
|        | 面向字节流   | 面向数据报          |
|        | 传输层协议   | 传输层协议          |
|        | 数据量大     | 传输数据量小        |
|        | 速度慢       | 速度快              |
| 用途   |              | 单播 多播 广播 组播 |



## HTTP

介绍：超文本传输协议，应用层上的一种c/s模型的通信协议，承载于TCP协议之上，由请求和响应构成，且无状态的，默认端口号80，

缺点：

1. 通信使用明文，内容可能会被窃听，产生中间人攻击
2. 不验证通信方的身份，可能遭遇伪装
3. 无法证明报文的完整性

特点：

1. 协议：规定了通信双方必须遵守的数据传输格式，双方按照约定的格式才能准确的通信
2. 无状态：指两次连接通信之间是没有任何关系的。每次都是一个新的连接，服务端无法记录前后的请求信息
3. 客户端/服务端模型
4. 处于五层网络模型当中的应用层。通常承载于TLS或SSl协议层之上，这时候就成了常说的Https

### 跨域问题

CORS跨域资源共享，克服了ajax只能同源使用的限制

CORS需要浏览器和服务器同时支持，目前所有的浏览器都支持该功能

浏览器将CORS请求分成简单请求和非简单请求

简单请求：方法：HEAD，GET，POST；头信息不超出：Accept， Accept-language， Content-Language， Last-Event-ID， Content-type

客户端在请求头中，增加Origin字段，表示该请求来自于哪个源，

浏览器根据服务端的返回是否包含Access-Control-Allow-Origin字段来判断是否出错，如果服务端允许则相应中应包含，Access-Control-Allow-Origin，Credentials，Headers，Context-Type，前三个都与cors有关

非简单请求：请求方式是PUT或者DELETE， Content-Type类型是application/json

正式通信之前会增加一次HTTP查询请求，成为预检请求，询问当前请求是否允许跨域，之后再发出正式请求





与jsonp比较：

jsonp利用的是dom当中的script标签当中的src不受同源策略的限制的原理

jsonp支持get请求，cors支持所有请求类型，jsonp优势在于支持比较老的浏览器，以及可以向不支持CORS的网站请求数据

## HTTPS

端口443，http+ssl，传输加密,解决了HTTP传输不安全的问题，

采用ssl进行非对称加密

如果采用对称加密的话。那么第一次传输密钥的时候也是明文，例如AES

非对称加密：公钥加密只能用私钥进行解密，反之亦然，但为了防止中间人修改加密，所以出现了权威的证书颁发机构(CA)

证书原理：

服务端将公钥发送到权威机构，申请证书，机构使用私钥加密服务端公钥，通过服务端网址等信息生成一个证书签名，证书签名经过私钥加密，制作完成后发送给服务端

客户端通信的时候获取证书，向权威机构验证，浏览器维护了所有权威机构的证书和公钥，可以从本地找到对应的机构公钥，客户端利用机构公钥解密服务端公钥